if("a".replace(/a/,function(){return"b"})!="b"){(function(){var a=String.prototype.replace;String.prototype.replace=function(j,c){if(typeof c!="function"){return a.apply(this,arguments)}var e=""+this;var h=c;if(!(j instanceof RegExp)){var g=e.indexOf(j);return(g==-1?e:a.apply(e,[j,h(j,g,e)]))}var b=j;var k=[];var f=b.lastIndex;var i;while((i=b.exec(e))!=null){var g=i.index;var d=i.concat(g,e);k.push(e.slice(f,g),h.apply(null,d).toString());if(!b.global){f+=RegExp.lastMatch.length;break}else{f=b.lastIndex}}k.push(e.slice(f));return k.join("")}})()}var CodeHighlighter={styleSets:new Array};CodeHighlighter.addStyle=function(a,c){if([].push){this.styleSets.push({name:a,rules:c,ignoreCase:arguments[2]||false})}function b(){if(typeof Event!="undefined"&&typeof Event.onReady=="function"){return Event.onReady(CodeHighlighter.init.bind(CodeHighlighter))}var d=window.onload;if(typeof window.onload!="function"){window.onload=function(){CodeHighlighter.init()}}else{window.onload=function(){d();CodeHighlighter.init()}}}if(this.styleSets.length==1){b()}};CodeHighlighter.init=function(){if(!document.getElementsByTagName){return}if("a".replace(/a/,function(){return"b"})!="b"){return}var d=document.getElementsByTagName("CODE");d.filter=function(j){var g=new Array;for(var h=0;h<this.length;h++){if(j(this[h])){g[g.length]=this[h]}}return g};var f=new Array;f.toString=function(){var h=new Array;for(var g=0;g<this.length;g++){h.push(this[g].exp)}return h.join("|")};function a(g,h){var i=(typeof h.exp!="string")?String(h.exp).substr(1,String(h.exp).length-2):h.exp;f.push({className:g,exp:"("+i+")",length:(i.match(/(^|[^\\])\([^?]/g)||"").length+1,replacement:h.replacement||null})}function e(h,g){return h.replace(new RegExp(f,(g)?"gi":"g"),function(){var n=0,m=1,o;while(o=f[n++]){if(arguments[m]){if(!o.replacement){return'<span class="'+o.className+'">'+arguments[0]+"</span>"}else{var p=o.replacement.replace("$0",o.className);for(var l=1;l<=o.length-1;l++){p=p.replace("$"+l,arguments[m+l])}return p}}else{m+=o.length}}})}function b(m){var g,k=new RegExp("(\\s|^)"+m.name+"(\\s|$)");f.length=0;var l=d.filter(function(i){return k.test(i.className)});for(var j in m.rules){a(j,m.rules[j])}for(var h=0;h<l.length;h++){if(/MSIE/.test(navigator.appVersion)&&l[h].parentNode.nodeName=="PRE"){l[h]=l[h].parentNode;g=l[h].innerHTML.replace(/(<code[^>]*>)([^<]*)<\/code>/i,function(){return arguments[1]+e(arguments[2],m.ignoreCase)+"</code>"});g=g.replace(/\n( *)/g,function(){var n="";for(var o=0;o<arguments[1].length;o++){n+="&nbsp;"}return"\n"+n});g=g.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");g=g.replace(/\n(<\/\w+>)?/g,"<br />$1").replace(/<br \/>[\n\r\s]*<br \/>/g,"<p><br></p>")}else{g=e(l[h].innerHTML,m.ignoreCase)}l[h].innerHTML=g}}for(var c=0;c<this.styleSets.length;c++){b(this.styleSets[c])}};CodeHighlighter.addStyle("javascript",{comment:{exp:/(\/\/[^\n]*(\n|$))|(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)/},brackets:{exp:/\(|\)/},string:{exp:/'[^']*'|"[^"]*"/},keywords:{exp:/\b(arguments|break|case|continue|default|delete|do|else|false|for|function|if|in|instanceof|new|null|return|switch|this|true|typeof|var|void|while|with)\b/},global:{exp:/\b(toString|valueOf|window|element|prototype|constructor|document|escape|unescape|parseInt|parseFloat|setTimeout|clearTimeout|setInterval|clearInterval|NaN|isNaN|Infinity)\b/}});CodeHighlighter.addStyle("html",{comment:{exp:/&lt;!\s*(--([^-]|[\r\n]|-[^-])*--\s*)&gt;/},tag:{exp:/(&lt;\/?)([a-zA-Z]+\s?)/,replacement:'$1<span class="$0">$2</span>'},string:{exp:/'[^']*'|"[^"]*"/},attribute:{exp:/\b([a-zA-Z-:]+)(=)/,replacement:'<span class="$0">$1</span>$2'},doctype:{exp:/&lt;!DOCTYPE([^&]|&[^g]|&g[^t])*&gt;/}});CodeHighlighter.addStyle("ruby",{operator:{exp:/(::|&lt;&lt;)/},comment:{exp:/#[^\n]+/},brackets:{exp:/\(|\)/},string:{exp:/'[^']*'|"[^"]*"/},keywords:{exp:/\b(do|end|self|class|def|if|module|yield|then|else|for|until|unless|while|elsif|case|when|break|retry|redo|rescue|require|raise)\b/},symbol:{exp:/(:[A-Za-z0-9_!?]+)/},instancevar:{exp:/([^@])(@[A-Za-z0-9_!?]+)/},constant:{exp:/[A-Z][A-Za-z]*/}});CodeHighlighter.addStyle("css",{comment:{exp:/\/\*[^*]*\*+([^\/][^*]*\*+)*\//},keywords:{exp:/@\w[\w\s]*/},selectors:{exp:"([\\w-:\\[.#][^{};>]*)(?={)"},properties:{exp:"([\\w-]+)(?=\\s*:)"},units:{exp:/([0-9])(em|en|px|%|pt)\b/,replacement:'$1<span class="$0">$2</span>'},urls:{exp:/url\([^\)]*\)/}});var addDOMLoadEvent=(function(){var load_events=[],load_timer,script,done,exec,old_onload,init=function(){done=true;clearInterval(load_timer);while(exec=load_events.shift()){exec()}if(script){script.onreadystatechange=""}};return function(func){if(done){return func()}if(!load_events[0]){if(document.addEventListener){document.addEventListener("DOMContentLoaded",init,false);
/*@cc_on @*/
/*@if (@_win32)
                document.write("<script id=__ie_onload defer src=//0><\/scr"+"ipt>");
                script = document.getElementById("__ie_onload");
                script.onreadystatechange = function() {
                    if (this.readyState == "complete")
                        init(); // call the onload handler
                };
            /*@end @*/
}if(/WebKit/i.test(navigator.userAgent)){load_timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){init()}},10)}old_onload=window.onload;window.onload=function(){init();if(old_onload){old_onload()}}}load_events.push(func)}})();var addDOMLoadEvent=(function(){var load_events=[],load_timer,script,done,exec,old_onload,init=function(){done=true;clearInterval(load_timer);while(exec=load_events.shift()){exec()}if(script){script.onreadystatechange=""}};return function(func){if(done){return func()}if(!load_events[0]){if(document.addEventListener){document.addEventListener("DOMContentLoaded",init,false);
/*@cc_on @*/
/*@if (@_win32)
                document.write("<script id=__ie_onload defer src=//0><\/scr"+"ipt>");
                script = document.getElementById("__ie_onload");
                script.onreadystatechange = function() {
                    if (this.readyState == "complete")
                        init(); // call the onload handler
                };
            /*@end @*/
		}if(/WebKit/i.test(navigator.userAgent)){load_timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){init()}},10)}old_onload=window.onload;window.onload=function(){init();if(old_onload){old_onload()}}}load_events.push(func)}})();var Base=function(){};Base.extend=function(b,e){var f=Base.prototype.extend;Base._prototyping=true;var d=new this;f.call(d,b);delete Base._prototyping;var c=d.constructor;var a=d.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==a){this._constructing=true;c.apply(this,arguments);delete this._constructing}else{if(arguments[0]!=null){return(arguments[0].extend||f).call(arguments[0],d)}}}};a.ancestor=this;a.extend=this.extend;a.forEach=this.forEach;a.implement=this.implement;a.prototype=d;a.toString=this.toString;a.valueOf=function(g){return(g=="object")?a:c.valueOf()};f.call(a,e);if(typeof a.init=="function"){a.init()}return a};Base.prototype={extend:function(b,h){if(arguments.length>1){var e=this[b];if(e&&(typeof h=="function")&&(!e.valueOf||e.valueOf()!=h.valueOf())&&/\bbase\b/.test(h)){var a=h.valueOf();h=function(){var k=this.base||Base.prototype.base;this.base=e;var i=a.apply(this,arguments);this.base=k;return i};h.valueOf=function(i){return(i=="object")?h:a};h.toString=Base.toString}this[b]=h}else{if(b){var g=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){g=this.extend||g}var d={toSource:null};var f=["constructor","toString","valueOf"];var c=Base._prototyping?0:1;while(j=f[c++]){if(b[j]!=d[j]){g.call(this,j,b[j])}}for(var j in b){if(!d[j]){g.call(this,j,b[j])}}}}return this},base:function(){}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,d,c){for(var b in a){if(this.prototype[b]===undefined){d.call(c,a[b],b,a)}}},implement:function(){for(var a=0;a<arguments.length;a++){if(typeof arguments[a]=="function"){arguments[a](this.prototype)}else{this.prototype.extend(arguments[a])}}return this},toString:function(){return String(this.valueOf())}});function addEvent(b,d,c){if(b.addEventListener){b.addEventListener(d,c,false)}else{if(!c.$$guid){c.$$guid=addEvent.guid++}if(!b.events){b.events={}}var a=b.events[d];if(!a){a=b.events[d]={};if(b["on"+d]){a[0]=b["on"+d]}}a[c.$$guid]=c;b["on"+d]=handleEvent}}addEvent.guid=1;function removeEvent(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{if(a.events&&a.events[c]){delete a.events[c][b.$$guid]}}}function handleEvent(d){var c=true;d=d||fixEvent(((this.ownerDocument||this.document||this).parentWindow||window).event);var a=this.events[d.type];for(var b in a){this.$$handleEvent=a[b];if(this.$$handleEvent(d)===false){c=false}}return c}function fixEvent(a){a.preventDefault=fixEvent.preventDefault;a.stopPropagation=fixEvent.stopPropagation;return a}fixEvent.preventDefault=function(){this.returnValue=false};fixEvent.stopPropagation=function(){this.cancelBubble=true};if(typeof v2==="undefined"||v2===null){v2={}}v2.empty=function empty(a){return typeof a=="undefined"||a===null||a===""};v2.array=function array(c){var a=[];if(c&&typeof c.item==="function"){for(var b=0;b<c.length;b++){a[b]=c[b]}c=a}return v2.empty(c)?[]:(typeof c.shift=="undefined"?[c]:c)};v2.target=function(a){if(!a){return null}return a.explicitOriginalTarget||a.srcElement||a.target||null};v2.Object={extend:function(c,a,b){b=typeof b==="undefined"?false:b;for(var d in a){if(b&&typeof c[d]!=="undefined"){continue}if(a.hasOwnProperty(d)&&typeof a[d]!=="undefined"){c[d]=a[d]}}return c}};v2.Object.extend(String.prototype,{strip:function(){return this.replace(/^\s+|\s+$/,"")}});v2.Object.extend(Array.prototype,{indexOf:function(c,a){for(var b=0;b<this.length;b++){if(this[b]===c){return b}}return -1}});v2.$=function(a,c){if(typeof a=="string"){a=document.getElementById(a)}c=typeof c=="undefined"?true:c;if(a===null||typeof a.hide!="undefined"||!c){return a}for(var b in v2.Element){if(v2.Element.hasOwnProperty(b)){(function(){var d=b;var e={};e[d]=function(){var f=[a];for(var g=0;g<arguments.length;g++){f.push(arguments[g])}return v2.Element[d].apply(v2.Element,f)};v2.Object.extend(a,e,true)})()}}return a};v2.$$=function $$(e,q){q=q||document;if(document.querySelectorAll){v2.$$=function(i,j){return(j||document).querySelectorAll(i)};return v2.$$(e,q)}var r=e.split(",");var m,h,f,b,n,d,a,l,c,g,o,p;var s=[];for(m=0;(e=r[m]);m++){b=e.strip().split(/[^a-zA-Z]/)[0]||"*";n=e.replace(/^\./,"_.").split(/\./);c=[];g=[];for(h=1;h<n.length;h++){c.push(n[h].split(/[^a-zA-Z\-_]/)[0])}n=e.replace("][","].[").split(/[\[\]]/);for(h=0;h<n.length-1;h+=2){d=n[h+1].split("=");d[1]=d[1]||true;g.push(d)}a=q.getElementsByTagName(b);elementLoop:for(h=0;(l=a[h]);h++){for(f=0;f<c.length;f++){if(!v2.Element.hasClassName(l,c[f])){continue elementLoop}}for(f=0;f<g.length;f++){o=g[f][0];p=g[f][1];if(l.hasAttribute){if(!l.hasAttribute(o)||(p!==true&&l.getAttribute(o)!==p)){continue elementLoop}}else{o=o==="for"?"htmlFor":o;if(typeof l[o]==="undefined"||(p!==true&&l[o]!==p)){continue elementLoop}}}if(s.indexOf(l)<0){s.push(l)}}}return s};v2.Element={observe:function(b,c,a){addEvent(b,c,a)},computedStyle:function(a,c){var b="";if(document.defaultView&&document.defaultView.getComputedStyle){b=document.defaultView.getComputedStyle(a,"").getPropertyValue(c)}else{if(a.currentStyle){c=c.replace(/\-(\w)/g,function(d,e){return e.toUpperCase()});b=a.currentStyle[c]}}return b},visible:function(a){return v2.Element.computedStyle(a,"display")!="none"&&v2.Element.computedStyle(a,"visibility")!="hidden"&&(a.parentNode===null||a.parentNode.nodeType!=1||v2.Element.visible(a.parentNode))},hasClassName:function(b,a){return new RegExp("(^|\\s)"+a+"(\\s|$)").test(b.className)},addClassName:function(b,a){b.className+=v2.Element.hasClassName(b,a)?"":" "+a;b.className=b.className.replace("  "," ").replace(/^\s|\s$/,"");return b},removeClassName:function(b,a){var c=new RegExp("(^|\\s)"+a+"(\\s|$)");b.className=b.className.replace(c," ").replace("  "," ").replace(/^\s|\s$/,"");return b},position:function(a){var b={x:0,y:0};while(a!==null){b.x+=a.offsetLeft;b.y+=a.offsetTop;a=a.offsetParent}return b},scrollTo:function(a){var b=v2.Element.position(a);window.scrollTo(b.x,b.y)},previous:function(a){do{a=a.previousSibling}while(a&&a.nodeType!==1);return a}};v2.Object.extend(Function.prototype,{bind:function(b){var a=this;a.__cc=a.__cc||[];window.__coc=window.__coc||0;if(typeof b.__id=="undefined"){b.__id=window.__coc++}a.__cc[b.__id]=a.__cc[b.__id]||function(){try{return a.apply(b,arguments)}catch(c){}};return a.__cc[b.__id]}});if(typeof addDOMLoadEvent!="undefined"){v2.addDOMLoadEvent=addDOMLoadEvent}v2.CompositeFormItem=Base.extend({type:"generic",constructor:function(){if(v2.empty(this.__validators)){this.__validators=[]}if(v2.empty(this.__errors)){this.__errors=[]}this.__passOnAny=false;this.__message=null;this.parent=null},add:function(a){this.__validators.push(a);a.parent=this},get:function(a){return !v2.empty(a)?this.__validators[a]:this.__validators},validate:function(){this.__errors=[];var a=this.test("validate");if(a){this.__errors=[];this.onSuccess()}else{this.onFailure()}return a},test:function(c){var b,a,d=0;c=c||"test";for(b=0;(a=this.__validators[b]);b++){if(a[c]()){d++}else{this.__errors.push(a)}}return this.passOnAny()&&d>0||!this.passOnAny()&&d===this.__validators.length},getInvalid:function(){return this.__errors.length===0?null:this.__errors},setMessage:function(a){this.__message=a},getMessages:function(){if(!v2.empty(this.__message)){return[this.__message]}var c=[],b,a;for(b=0,a;(a=this.__errors[b]);b++){c=c.concat(a.getMessages())}return c},passOnAny:function(a){if(typeof a!=="undefined"){this.__passOnAny=!!a}return this.__passOnAny},onSuccess:function(){},onFailure:function(){}});v2.InputElement=Base.extend({constructor:function(b,a){this.__name=null;this.__events=v2.empty(a)?["blur"]:v2.array(a);this.__elements=v2.array(b)},monitor:function(d){this.__monitored=true;var c,a,b,e;for(c=0;(b=this.__elements[c]);c++){for(a=0;(e=this.__events[a]);a++){v2.Element.observe(b,e,d)}}},getValue:function(){return this.__elements[0].value},getLabel:function(){var b=this.__elements[0];var a=v2.$$("label[for="+(b.id||b.name)+"]",b.form);return a&&a[0]},getName:function(){if(this.__name){return this.__name}var a=this.getLabel();if(a){return a.title!==""?a.title:a.innerHTML}var b=this.__elements[0];return b.id||b.name},setName:function(a){this.__name=!!a?a:null;return this},getParent:function(){return this.__elements[0].parentNode},getElements:function(){return this.__elements},visible:function(){if(!v2.$(this.getParent()).visible()){return false}for(var a=0,b;(b=this.__elements[a]);a++){if(v2.Element.visible(b)){return true}}return false}},{__fields:{},get:function(b){if(b&&b.constructor===v2.InputElement){return b}var c=v2.$(b),h,g,f,a,d,e;if(!c){a="input$, select$, textarea$";f=v2.$$(a.replace(/\$/g,"[name="+b+"]"));c=f[0]}if(!c){throw new TypeError(b+" does not resolve to an HTML element!")}h=c.name||c.id;if((g=v2.InputElement.__fields[h])){return g}if(c.options){g=new v2.SelectElement(c)}else{if(c.tagName.toLowerCase()==="textarea"){g=new v2.TextareaElement(c)}else{if(c.type&&c.type=="radio"){f=v2.$$("input[type=radio][name="+c.name+"]",c.form);g=new v2.RadioElement(f)}else{if(c.type&&c.type=="checkbox"){d=c.className;e=/\bg_([^\s]*)\b/;f=e.test(d)?v2.$$("input[type=checkbox].g_"+d.match(e)[1],c.form):[c];g=new v2.CheckboxElement(f)}else{g=new v2.InputElement(c)}}}}return(v2.InputElement.__fields[h]=g)}});v2.$f=v2.InputElement.get;v2.RadioElement=v2.InputElement.extend({constructor:function(a){this.base(a,["click","change"])},getValue:function(){for(var b=0,a;(a=this.__elements[b]);b++){if(a.checked){return a.value}}return null},getLabel:function(){var b=this.__elements[0].parentNode;if(b.tagName.toLowerCase()==="li"){return v2.$(b.parentNode).previous()}var a=v2.$(this.__elements[0]).previous();return a||this.base()},getParent:function(){var a=this.__elements[0].parentNode;return a.tagName.toLowerCase()==="li"?a.parentNode.parentNode:a}});v2.SelectElement=v2.InputElement.extend({constructor:function(a){this.base([a],"change")},getValue:function(){var a=this.__elements[0];if(!a.multiple){return a.options[a.selectedIndex].value}var b=[];for(var c=0,d;(d=a.options[c]);c++){if(d.selected){b.push(d.value)}}return b}});v2.TextareaElement=v2.InputElement.extend({});v2.CheckboxElement=v2.RadioElement.extend({getValue:function(){var a=[],b,c;for(b=0,c;(c=this.__elements[b]);b++){if(c.checked){a.push(c.value)}}return a}});v2.Message=Base.extend({constructor:function(b,c,a){this.message=b;this.params=c||[];this.values=a||[]},copy:function(){return new v2.Message(this.message,this.params,this.values)},toString:function(){var c=this.message+"";for(var a=0,b=null;(b=this.params[a]);a++){c=c.replace("${"+b+"}",this.values[a])}return c}});v2.Validator=Base.extend({constructor:function(b,c,d,e,a){this.__name=b;this.__test=c;this.__message=new v2.Message(d||"${field} does not pass "+b+" validator",e);this.__aliases=v2.array(a);this.acceptEmpty=true},test:function(c,e,d){d=typeof d==="undefined"?false:d;var b=c.getValue();var a=(this.acceptEmpty&&b==="")||this.__test(c,b,e);return(a&&!d)||(!a&&d)},getName:function(){return this.__name},getMessage:function(){return this.__message},setMessage:function(a){this.__message.message=a}},{validators:{},add:function(b){if(!b.name||!b.fn){throw new TypeError("Options object should contain name and fn")}b=v2.Object.extend({params:[],aliases:[],acceptEmpty:true},b,false);var f=v2.array(b.params);var d=new v2.Validator(b.name,b.fn,b.message,f,b.aliases);d.acceptEmpty=b.acceptEmpty;var e=v2.array(b.aliases).concat([b.name]);for(var c=0,a;(a=e[c]);c++){v2.Validator.validators[a]=d}return d},reg:function(b,c,f,d,a,e){return v2.Validator.add({name:b,fn:c,message:d,params:f,aliases:a,acceptEmpty:e})},get:function(a){var b;if(a.constructor===v2.Validator){return a}if((b=v2.Validator.validators[a])){return b}return null}});v2.$v=function(a){return v2.Validator.get(a)};v2.$msg=function(){if(arguments.length===2){return v2.Validator.get(arguments[0]).setMessage(arguments[1])}for(var a in arguments[0]){try{v2.Validator.get(a).setMessage(arguments[0][a])}catch(b){}}};v2.Field=v2.CompositeFormItem.extend({validateHidden:false,instant:false,instantWhenValidated:true,type:"field",constructor:function(b,a,c){this.base();this.__monitored=false;this.element=v2.$f(b);this.instant=typeof a!=="undefined"?a:this.instant;this.instantWhenValidated=typeof c!=="undefined"?c:this.instantWhenValidated;this.__monitor(this.instant)},test:function(){if(!this.validateHidden&&!this.element.visible()){return true}return this.base()},validate:function(){this.__monitor(this.instantWhenValidated&&!this.__monitored);return this.base()},addValidator:function(a,e,c){var b=v2.$v(a);if(b===null){throw new Error(a+" is not a valid validator")}if(typeof c!=="undefined"&&c!==null){c=new v2.Message(c,b.getMessage().params)}var d=new v2.FieldValidator(this.element,b,v2.array(e),c);this.add(d);return d},getParent:function(){return this.element.getParent()},__monitor:function(b){if(!b||this.__monitored){return}this.__monitored=true;var a=this.parent&&this.parent.type==="fieldset"?this.parent:this;this.element.monitor(a.validate.bind(this))}});v2.Fieldset=v2.CompositeFormItem.extend({type:"fieldset",constructor:function(a){this.base();this.element=a},getParent:function(){return this.element}});v2.FieldValidator=Base.extend({invert:false,constructor:function(c,a,e,d){this.__field=c;this.__validator=a;this.__params=v2.array(e);this.__message=d||a.__message.copy();var b=this.__message.params;if(b.length<1||b[0]!=="field"){this.__message.params=["field"].concat(b)}this.__message.values=[this.__field.getName()].concat(this.__params)},test:function(){return this.__validator.test(this.__field,this.__params,this.invert)},validate:function(){return this.test()},getInvalid:function(){return !this.test()?this:null},setMessage:function(a){this.__message.message=a},getMessages:function(){return[this.__message.toString()]},add:function(){},remove:function(){},get:function(){},passOnAny:function(){},onSuccess:function(){},onFailure:function(){}});v2.Form=v2.CompositeFormItem.extend({type:"form",constructor:function(a){this.base();this.__form=v2.$(a);this.__form.observe("submit",this.validate.bind(this));this.__buttons=[]},addButton:function(a){this.__buttons.push(a)},validate:function(){var c=arguments.length>0?arguments[0]:null;var d=v2.target(c);var b=this.__buttons;if(b.length>0&&d&&b.indexOf(d)<0){return true}var a=this.base();if(!a&&c){c.preventDefault();c.returnValue=false}return a}},{forms:{},get:function(c){var b=v2.$(c),a;if(b===null||b.tagName.toLowerCase()!=="form"){throw new ArgumentError("idOrElement should represent a form element")}if(!v2.empty(a=v2.Form.forms[b.id])){return a}return(v2.Form.forms[b.id]=new v2.Form(b))}});(function(){var a=v2.Validator;a.reg("email",function(c,b,d){return/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(b)});a.reg("required",function(c,b,d){return !v2.empty(b)&&!(typeof b.length!=="undefined"&&b.length===0)},null,null,"not-empty",false);a.reg("url",function(c,b,d){return/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(b)})})();v2.$msg({alpha:"${field} skal bare inneholde bokstaver",alphanum:"${field} skal bare inneholde tall og bokstaver","car-regnum-nor":"${field} må være et gyldig bilskiltnummer","confirmation-of":"${field} må være en bekreftelse av ${field-id}",email:"${field} må være en gyldig e-postadresse","max-length":"${field} kan ikke være lengre enn ${max} tegn","max-val":"${field} kan ikke være større enn ${min}","min-val":"${field} må være minst ${min}","min-length":"${field} må være minst ${min} tegn",numeric:"${field} skal bare inneholde tall","phone-nor":"${field} må være et gyldig norskt telefonnummer",required:"${field} er påkrevd","ssn-nor":"${field} må være et gyldig personnummer",url:"${field} må være en gyldig URL",word:"${field} må bare inneholde bokstaver, tall og tegnsetting"});v2.Object.extend(v2.Validator,{prefix:""});v2.Object.extend(v2.Form,{autoValidateClass:"validate",actionButtonClass:"action"});v2.html={validateAnyClass:"validate_any",validateAllClass:"validate_all",validatorsFromString:function(j){var e=v2.Validator.prefix;var g=new RegExp("^"+e,"");var f,h,b,d,a,c=[];j=j.split(" ");for(f=0;(h=j[f]);f++){b=false;if(!v2.empty(e)&&!g.test(h)){continue}h=h.replace(g,"");if(/^not_/.test(h)){h=h.replace(/^not_/,"");b=true}d=h.split("_");a=d.shift();if(a&&(a=v2.$v(a))){c.push({validator:a,params:d,invert:b})}}return c},applyValidators:function(a,f,d){if(!v2.empty(d)){f.setMessage(d)}for(var c=0,b,e;(b=a[c]);c++){e=f.addValidator(b.validator,b.params);e.invert=b.invert}return f}};v2.html.Form=Base.extend({constructor:function(a){this.form=v2.Form.get(a);this.__parsed={};this.parseElement(a,this.form);this.form.passOnAny(v2.$(a).hasClassName(v2.html.validateAnyClass))},parseElement:function(c,m,e){var a=v2.$$("div, fieldset, input, select, textarea",c);var h,f,b,k,g,d,n,l;this.__parsed[c.id||c.name]=true;e=e||[];for(h=0;(g=a[h]);h++){if(e.length===0&&(/^\s*$/.test(g.className)||this.__parsed[g.id||g.name])){continue}d=g.tagName.toLowerCase();if(d==="input"&&v2.Element.hasClassName(g,v2.Form.actionButtonClass)){this.form.addButton(g);continue}if(d==="div"||d==="fieldset"){this.parseBlock(g,m);continue}l=e.concat(v2.html.validatorsFromString(g.className));if(l.length>0){n=new v2.Field(g);v2.html.applyValidators(l,n,g.title);this.__parsed[g.id||g.name]=true;m.add(n)}}},parseBlock:function(c,e){var d=new v2.Fieldset(c);var b=true;v2.$(c);if(c.hasClassName(v2.html.validateAnyClass)){}else{if(c.hasClassName(v2.html.validateAllClass)){b=false}else{return}}d.passOnAny(b);var a=v2.html.validatorsFromString(c.className);this.parseElement(c,d,a);if(!/^\s*$/.test(c.title)){d.setMessage(c.title)}if(d.get(0)){e.add(d)}}});v2.addDOMLoadEvent(function(){var a=document.getElementsByTagName("form");for(var b=0,c;(c=a[b]);b++){if(v2.Element.hasClassName(c,v2.Form.autoValidateClass)){new v2.html.Form(c)}}});v2.ErrorReporting={displayErrors:-1,positionErrorsAbove:true,failureClass:"error",successClass:"",messagesClass:"messages",onFailure:function(){if(this.parent&&this.parent.type==="fieldset"){return}var j=this.onSuccess();var f="",c,g,a,k;var l=[];var b=this.getMessages();j.addClassName(this.failureClass);j.removeClassName(this.successClass);var e=document.createElement("ul");e.id=this.__getId();e.className=this.messagesClass;var d=this.displayErrors;var h=this.__errors.length;d=d<0||d>h?h:d;for(c=0;c<d;c++){g=b[c];if(!g||l.indexOf(g.toString())>=0){continue}l.push(g.toString());k=document.createElement("li");k.innerHTML=g.toString();e.appendChild(k)}if(this.positionErrorsAbove){j.insertBefore(e,j.firstChild)}else{j.appendChild(e)}},onSuccess:function(){if(this.parent&&this.parent.type==="fieldset"){return null}var a=v2.$(this.getParent());var b=v2.$(this.__getId());if(b&&a===b.parentNode){a.removeChild(b)}a.removeClassName(this.failureClass);a.addClassName(this.successClass);return a},__getId:function(){var a=this.element.getElements?this.element.getElements()[0]:null;var c=a||this.getParent();var b=c.className;var d=((c.id||c.name||b.replace(this.failureClass,""))+"_"+this.failureClass).replace(" ","_").replace(/_+/,"_");return d}};v2.Object.extend(v2.Field.prototype,v2.ErrorReporting);v2.Object.extend(v2.Fieldset.prototype,v2.ErrorReporting);v2.Object.extend(v2.Form.prototype,{scrollToFirstWhenFail:true,onFailure:function(){if(!this.scrollToFirstWhenFail){return}var b,a,d,c=this.__form;d=c.all||c.getElementsByTagName("*");for(b=0;(a=d[b]);b++){if(v2.Element.hasClassName(a,v2.ErrorReporting.failureClass)){v2.Element.scrollTo(a);return}}}});addDOMLoadEvent(function(){var a=document.getElementById("num");if(a===null){return}a.value=718;a.parentNode.style.display="none"});addDOMLoadEvent(function(){var c,e,d,b,f,g=document.getElementsByTagName("blockquote");for(c=0;(f=g[c]);c++){if(f.cite&&f.cite!==""){e=document.createElement("p");d=document.createElement("cite");b=document.createElement("a");b.href=f.cite;b.innerHTML=f.title!==""?f.title:"Kilde";d.appendChild(b);e.appendChild(d);f.appendChild(e)}}});addDOMLoadEvent(function(){var c=document.getElementById("articles");if(c){var d,a,e=c.getElementsByTagName("h2");for(var b=0;(a=e[b]);b++){d=a.getElementsByTagName("a")[0];if(d.innerHTML.replace(/^\s+|\s+$/,"").length>32){a.className+=" long"}}}});addDOMLoadEvent(function(){var a,d,c,b=document.getElementsByTagName("span");for(c=0;(d=b[c]);c++){if(/(^|\s)email(\s|$)/.test(d.className)){try{a=d.title.split("$")[1].split(" ")[0];d.innerHTML=d.title.replace("$"+a,'<a href="mailto:'+a+'@cjohansen.no">'+a+"@cjohansen.no</a>");d.title=""}catch(f){}}}});v2.Field.prototype.displayErrors=0;v2.Field.prototype.instant=true;var tweets=(function(){function a(e){var g=document.getElementById("comments").getElementsByTagName("ol")[0].nextSibling;var f=g.parentNode;var h=document.createElement("h2");h.innerHTML=e+" tweet"+(e>1?"s":"");f.insertBefore(h,g);var i=document.createElement("ol");f.insertBefore(i,g);return i}function c(e){return e.replace(/\@([a-zA-Z0-9\-_]+)/g,function(g,f){return'<a href="http://twitter.com/'+f+'">'+g+"</a>"})}function b(e){return e.replace(/(http:\/\/[\w\.\d%\/]+)/ig,'<a href="$1">$1</a>')}function d(n){if(!document.getElementById("comments")){return}var g=n&&n.response&&n.response.list;if(typeof g!=="undefined"){var e=g.length;var j,l,k,h="",m;for(var f=e-1;f>=0;f--){j=g[f];l=j.author;m='<a href="'+l.url+'">';k='<li class="comment tweet"><div class="vcard">';k+="<h3>"+m+"@"+l.nick+"</a> ("+l.name+")</h3>";k+='<p><a href="'+j.permalink_url+'">'+j.date_alpha+"</a></p></div>";k+='<div class="image">'+m+'<img src="'+l.photo_url+'" alt="" width="40" height="40" /></a></div>';k+='<div class="entry-content">'+c(b(j.content))+"</div>";h+=k}a(e).innerHTML=h+"</ol>"}}return d}());